var PriorityQueue=function(){function t(t){this.comparator=t,this.contents=[],this.sorted=!1}return t.prototype.sort=function(){return this.contents.sort(this.comparator),this.sotred=!0},t.prototype.push=function(t){return this.contents.push(t),this.sorted=!1},t.prototype.peek=function(t){return null==t&&(t=this.contents.length-1),this.sorted||this.sort(),this.contents[t]},t.prototype.pop=function(){return this.sorted||this.sort(),this.contents.pop()},t.prototype.size=function(){return this.contents.length},t.prototype.map=function(t){return this.contents.map(t)},t}(),MMCQ=function(){var l,n,h,D,f,a;function b(){this.maxIterations=1e3,this.fractByPopulations=.75}function t(t,o,e,r,i,n,s){this.r1=t,this.r2=o,this.g1=e,this.g2=r,this.b1=i,this.b2=n,this.histo=s}function o(){this.cboxes=new PriorityQueue(function(t,o){t=t.count()*t.volume(),o=o.count()*o.volume();return o<t?1:t<o?-1:0})}return b.rshift=8-(b.sigbits=5),D=function(t,o,e){return(t<<2*b.sigbits)+(o<<b.sigbits)+e},t.prototype.volume=function(t){return this._volume&&!t||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},t.prototype.count=function(t){var o,e,r,i,n,s,u,c,h,f,a;if(!this._count_set||t){for(i=0,n=s=this.r1,h=this.r2;s<=h;n=s+=1)for(e=u=this.g1,f=this.g2;u<=f;e=u+=1)for(o=c=this.b1,a=this.b2;c<=a;o=c+=1)r=D(n,e,o),i+=this.histo[r]||0;this._count_set=!0,this._count=i}return this._count},t.prototype.copy=function(){return new t(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},t.prototype.average=function(t){var o,e,r,i,n,s,u,c,h,f,a,l,p,d,g;if(!this._average||t){for(s=1<<8-b.sigbits,e=i=c=h=0,u=f=this.r1,p=this.r2;f<=p;u=f+=1)for(r=a=this.g1,d=this.g2;a<=d;r=a+=1)for(o=l=this.b1,g=this.b2;l<=g;o=l+=1)n=D(u,r,o),h+=n=this.histo[n]||0,c+=n*(u+.5)*s,i+=n*(r+.5)*s,e+=n*(o+.5)*s;this._average=h?[~~(c/h),~~(i/h),~~(e/h)]:[~~(s*(this.r1+this.r2+1)/2),~~(s*(this.g1+this.g2+1)/2),~~(s*(this.b1+this.b2+1)/2)]}return this._average},t.prototype.contains=function(t){var o=t[0]>>b.rshift,e=t[1]>>b.rshift,t=t[2]>>b.rshift;return this.r1<=o&&o<=this.r2&&this.g1<=e&&e<=this.g2&&this.b1<=t&&t<=this.b2},l=t,o.prototype.push=function(t){return this.cboxes.push({cbox:t,color:t.average()})},o.prototype.palette=function(){return this.cboxes.map(function(t){return t.color})},o.prototype.size=function(){return this.cboxes.size()},o.prototype.map=function(t){var o,e=o=0,r=this.cboxes.size();if(o<r)return this.cboxes.peek(e).cbox.contains(t)?this.cboxes.peek(e).color:this.nearest(t)},o.prototype.cboxes=function(){return this.cboxes},o.prototype.nearest=function(t){for(var o,e,r,i=function(t){return t*t},n=1e9,s=r=0,u=this.cboxes.size();r<u;s=r+=1)(o=Math.sqrt(i(t[0]-this.cboxes.peek(s).color[0])+i(t[1]-this.cboxes.peek(s).color[1])+i(t[2]-this.cboxes.peek(s).color[2])))<n&&(n=o,e=this.cboxes.peek(s).color);return e},n=o,f=function(t){for(var o,e,r,i=new Array(1<<3*b.sigbits),n=0,s=t.length;n<s;n++)r=(e=t[n])[0]>>b.rshift,o=e[1]>>b.rshift,e=e[2]>>b.rshift,i[e=D(r,o,e)]=(i[e]||0)+1;return i},h=function(t,o){for(var e,r,i=1e6,n=0,s=1e6,u=0,c=1e6,h=0,f=0,a=t.length;f<a;f++)(r=(e=t[f])[0]>>b.rshift)<i?i=r:n<r&&(n=r),(r=e[1]>>b.rshift)<s?s=r:u<r&&(u=r),(e=e[2]>>b.rshift)<c?c=e:h<e&&(h=e);return new l(i,n,s,u,c,h,o)},a=function(t,l){var o,e,r,i,n,p,s,d,u,c,h,g,f,a,b,m,v,x,_,y,C,w,z,j,k,M,q,P,Q,I;if(l.count()){if(1===l.count())return[l.copy()];if(c=l.r2-l.r1+1,n=l.g2-l.g1+1,e=l.b2-l.b1+1,s=Math.max(c,n,e),g=0,d=[],p=[],s===c)for(u=f=l.r1,w=l.r2;f<=w;u=f+=1){for(h=0,i=a=l.g1,q=l.g2;a<=q;i=a+=1)for(o=b=l.b1,P=l.b2;b<=P;o=b+=1)h+=t[D(u,i,o)]||0;g+=h,d[u]=g}else if(s===n)for(i=m=l.g1,Q=l.g2;m<=Q;i=m+=1){for(h=0,u=v=l.r1,I=l.r2;v<=I;u=v+=1)for(o=x=l.b1,z=l.b2;x<=z;o=x+=1)h+=t[D(u,i,o)]||0;g+=h,d[i]=g}else for(o=_=l.b1,j=l.b2;_<=j;o=_+=1){for(h=0,u=y=l.r1,k=l.r2;y<=k;u=y+=1)for(i=C=l.g1,M=l.g2;C<=M;i=C+=1)h+=t[D(u,i,o)]||0;g+=h,d[o]=g}return d.forEach(function(t,o){return p[o]=g-t}),r=function(t){for(var o,e,r,i,n,s,u,c=t+"1",h=t+"2",f=u=l[c],a=l[h];u<=a;f=u+=1)if(d[f]>g/2){for(o=l.copy(),e=l.copy(),i=(n=f-l[c])<=(s=l[h]-f)?Math.min(l[h]-1,~~(f+s/2)):Math.max(l[c],~~(f-1-n/2));!d[i];)i++;for(r=p[i];!r&&d[i-1];)r=p[--i];return o[h]=i,e[c]=o[h]+1,[o,e]}},s===c?r("r"):s===n?r("g"):s===e?r("b"):void 0}},b.prototype.quantize=function(t,o){var s,e,u,r,i,c=this;if(!t.length||o<2||256<o)return console.log("invalid arguments"),!1;for(u=f(t),s=h(t,u),(r=new PriorityQueue(function(t,o){t=t.count(),o=o.count();return o<t?1:t<o?-1:0})).push(s),(t=function(t,o){for(var e,r,i=1,n=0;n<c.maxIterations;)if((s=t.pop()).count()){if(e=(r=a(u,s))[0],r=r[1],!e)return void console.log("cbox1 not defined; shouldn't happen");if(t.push(e),r&&(t.push(r),i++),o<=i)return;if(n++>c.maxIterations)return void console.log("infinite loop; perhaps too few pixels")}else t.push(s),n++})(r,this.fractByPopulations*o),i=new PriorityQueue(function(t,o){t=t.count()*t.volume(),o=o.count()*o.volume();return o<t?1:t<o?-1:0});r.size();)i.push(r.pop());for(t(i,o-i.size()),e=new n;i.size();)e.push(i.pop());return e},b}.call(this);(function(){function g(){}window.ColorExtract=(g.getColorMap=function(t,o,e,r,i,n){var s,u,c,h,f,a,l,p,d,g;for(null==n&&(n=8),c=t.getContext("2d").getImageData(o,e,r,i).data,h=[],d=(a=l=e)+i;l<d;a=l+=1)for(u=a*r*4,g=(f=p=o)+r;p<g;f=p+=1)h.push([c[s=u+4*f],c[1+s],c[2+s]]);return(new MMCQ).quantize(h,n)},g.colorDist=function(t,o){var e=function(t){return t*t};return e(t[0]-o[0])+e(t[1]-o[1])+e(t[2]-o[2])},g.extract=function(t,o,e){var r,i,n,s,u,c,h,f,a,l,p,d;for(o.width=25,o.height=25,o.getContext("2d").drawImage(t,0,0,o.width,o.height),(i=g.getColorMap(o,0,0,o.width,o.height,4).cboxes.map(function(t){return{count:t.cbox.count(),rgb:t.color}})).sort(function(t,o){return o.count-t.count}),r=i[0].rgb,(h=g.getColorMap(o,0,0,t.width,t.height,10).cboxes.map(function(t){return{count:t.cbox.count(),rgb:t.color}})).sort(function(t,o){return o.count-t.count}),a=f=0,p=h.length;a<p;a++)n=h[a],f<(s=g.colorDist(r,n.rgb))&&(f=s,u=n.rgb);for(l=f=0,d=h.length;l<d;l++)n=h[l],f<(s=g.colorDist(r,n.rgb))&&n.rgb!==u&&(f=s,c=n.rgb);return e({bgColor:(e=function(t){return"rgb("+t[0]+", "+t[1]+", "+t[2]+")"})(r),fgColor:e(u),fgColor2:e(c)})},g)}).call(this),function(s){s.fn.extend({jsPopupMenu:function(t){return this.each(function(){var t=s(this),o=t.find(".js-popup-menu-btn"),e=t.find(".js-popup-menu-popover");e.hide(),o.on("click",function(t){t.preventDefault(),e.is(":hidden")&&(e.show(),o.addClass("open"),setTimeout(function(){s(document).on("click.js-popup-menu-click",function(){e.hide(),o.removeClass("open"),s(this).off(".js-popup-menu-click")})},0))})}),this}}),s.jquerySelect={init:function(t,o){t.wrap('<div class="jq-select" />');var e=t.parent(),r=s('<div class="jq-select-arrow"></div>'),i=s('<div class="jq-select-content" />'),n=s('<div class="jq-select-inner" />').text(t.children(":selected").text());i.append(n),e.append(i),e.append(r),t.hasClass("form_field_size_large")?(t.removeClass("form_field_size_large"),e.addClass("form_field_size_large")):t.hasClass("form_field_size_medium")?(t.removeClass("form_field_size_medium"),e.addClass("form_field_size_medium")):(t.hasClass("form_field_size_small")&&t.removeClass("form_field_size_small"),e.addClass("form_field_size_small")),t.change(s.proxy(function(){n.text(t.children(":selected").text())},this)),t.keyup(s.proxy(function(){n.text(t.children(":selected").text())},this)),t.bind("update",s.proxy(function(){n.text(t.children(":selected").text())},this))}},s.fn.extend({jqSelect:function(o){return this.each(function(){var t=s.extend({},o);s.jquerySelect.init(s(this),t)}),this}});new LazyLoad({threshold:500,elements_selector:".js-lazyload",callback_loaded:function(t){s(t).closest(".js-content-item-box").removeClass("not-loaded with-error").addClass("is-loaded")}});s(".js-cart-btn").click(function(){s(this).data("product-id")&&Voog.ShoppingCart.addProductById(s(this).data("product-id"))})}(jQuery);