var MMCQ,PriorityQueue;PriorityQueue=function(){function t(t){this.comparator=t,this.contents=[],this.sorted=!1}return t.prototype.sort=function(){return this.contents.sort(this.comparator),this.sotred=!0},t.prototype.push=function(t){return this.contents.push(t),this.sorted=!1},t.prototype.peek=function(t){return null==t&&(t=this.contents.length-1),this.sorted||this.sort(),this.contents[t]},t.prototype.pop=function(){return this.sorted||this.sort(),this.contents.pop()},t.prototype.size=function(){return this.contents.length},t.prototype.map=function(t){return this.contents.map(t)},t}(),MMCQ=function(){var p,s,l,I,h,f;function b(){this.maxIterations=1e3,this.fractByPopulations=.75}return b.rshift=8-(b.sigbits=5),I=function(t,e,o){return(t<<2*b.sigbits)+(e<<b.sigbits)+o},p=function(){function t(t,e,o,n,r,i,s){this.r1=t,this.r2=e,this.g1=o,this.g2=n,this.b1=r,this.b2=i,this.histo=s}return t.prototype.volume=function(t){return this._volume&&!t||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},t.prototype.count=function(t){var e,o,n,r,i,s,a,c,u,l,h;if(!this._count_set||t){for(r=0,i=s=this.r1,u=this.r2;s<=u;i=s+=1)for(o=a=this.g1,l=this.g2;a<=l;o=a+=1)for(e=c=this.b1,h=this.b2;c<=h;e=c+=1)n=I(i,o,e),r+=this.histo[n]||0;this._count_set=!0,this._count=r}return this._count},t.prototype.copy=function(){return new t(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},t.prototype.average=function(t){var e,o,n,r,i,s,a,c,u,l,h,f,g,p,d,m;if(!this._average||t){for(a=1<<8-b.sigbits,o=r=u=l=0,c=h=this.r1,p=this.r2;h<=p;c=h+=1)for(n=f=this.g1,d=this.g2;f<=d;n=f+=1)for(e=g=this.b1,m=this.b2;g<=m;e=g+=1)s=I(c,n,e),l+=i=this.histo[s]||0,u+=i*(c+.5)*a,r+=i*(n+.5)*a,o+=i*(e+.5)*a;this._average=l?[~~(u/l),~~(r/l),~~(o/l)]:[~~(a*(this.r1+this.r2+1)/2),~~(a*(this.g1+this.g2+1)/2),~~(a*(this.b1+this.b2+1)/2)]}return this._average},t.prototype.contains=function(t){var e,o,n;return n=t[0]>>b.rshift,o=t[1]>>b.rshift,e=t[2]>>b.rshift,this.r1<=n&&n<=this.r2&&this.g1<=o&&o<=this.g2&&this.b1<=e&&e<=this.b2},t}(),s=function(){function t(){this.cboxes=new PriorityQueue(function(t,e){var o,n;return o=t.count()*t.volume(),(n=e.count()*e.volume())<o?1:o<n?-1:0})}return t.prototype.push=function(t){return this.cboxes.push({cbox:t,color:t.average()})},t.prototype.palette=function(){return this.cboxes.map(function(t){return t.color})},t.prototype.size=function(){return this.cboxes.size()},t.prototype.map=function(t){var e,o,n;for(e=o=0,n=this.cboxes.size();o<n;e=o+=1)return this.cboxes.peek(e).cbox.contains(t)?this.cboxes.peek(e).color:this.nearest(t)},t.prototype.cboxes=function(){return this.cboxes},t.prototype.nearest=function(t){var e,o,n,r,i,s,a;for(i=function(t){return t*t},n=1e9,o=s=0,a=this.cboxes.size();s<a;o=s+=1)(e=Math.sqrt(i(t[0]-this.cboxes.peek(o).color[0])+i(t[1]-this.cboxes.peek(o).color[1])+i(t[2]-this.cboxes.peek(o).color[2])))<n&&(n=e,r=this.cboxes.peek(o).color);return r},t}(),h=function(t){var e,o,n,r,i,s,a,c;for(n=new Array(1<<3*b.sigbits),a=0,c=t.length;a<c;a++)s=(i=t[a])[0]>>b.rshift,o=i[1]>>b.rshift,e=i[2]>>b.rshift,n[r=I(s,o,e)]=(n[r]||0)+1;return n},l=function(t,e){var o,n,r,i,s,a,c,u,l,h,f,g;for(r=a=h=1e6,f=n=s=l=0,g=t.length;f<g;f++)(u=(c=t[f])[0]>>b.rshift)<h?h=u:l<u&&(l=u),(i=c[1]>>b.rshift)<a?a=i:s<i&&(s=i),(o=c[2]>>b.rshift)<r?r=o:n<o&&(n=o);return new p(h,l,a,s,r,n,e)},f=function(t,f){var e,o,n,r,i,g,s,p,a,c,u,d,l,h,m,b,v,C,y,x,w,_,P,k,j,z,B,M,S,D;if(f.count()){if(1===f.count())return[f.copy()];if(c=f.r2-f.r1+1,i=f.g2-f.g1+1,o=f.b2-f.b1+1,s=Math.max(c,i,o),d=0,p=[],g=[],s===c)for(a=l=f.r1,_=f.r2;l<=_;a=l+=1){for(u=0,r=h=f.g1,B=f.g2;h<=B;r=h+=1)for(e=m=f.b1,M=f.b2;m<=M;e=m+=1)u+=t[I(a,r,e)]||0;d+=u,p[a]=d}else if(s===i)for(r=b=f.g1,S=f.g2;b<=S;r=b+=1){for(u=0,a=v=f.r1,D=f.r2;v<=D;a=v+=1)for(e=C=f.b1,P=f.b2;C<=P;e=C+=1)u+=t[I(a,r,e)]||0;d+=u,p[r]=d}else for(e=y=f.b1,k=f.b2;y<=k;e=y+=1){for(u=0,a=x=f.r1,j=f.r2;x<=j;a=x+=1)for(r=w=f.g1,z=f.g2;w<=z;r=w+=1)u+=t[I(a,r,e)]||0;d+=u,p[e]=d}return p.forEach(function(t,e){return g[e]=d-t}),n=function(t){var e,o,n,r,i,s,a,c,u,l,h;for(s=t+"2",a=l=f[i=t+"1"],h=f[s];l<=h;a=l+=1)if(p[a]>d/2){for(e=f.copy(),o=f.copy(),r=(c=a-f[i])<=(u=f[s]-a)?Math.min(f[s]-1,~~(a+u/2)):Math.max(f[i],~~(a-1-c/2));!p[r];)r++;for(n=g[r];!n&&p[r-1];)n=g[--r];return e[s]=r,o[i]=e[s]+1,[e,o]}},s===c?n("r"):s===i?n("g"):s===o?n("b"):void 0}},b.prototype.quantize=function(t,e){var a,o,c,n,r,i,u=this;if(!t.length||e<2||256<e)return console.log("invalid arguments"),!1;for(c=h(t),a=l(t,c),(r=new PriorityQueue(function(t,e){var o,n;return o=t.count(),(n=e.count())<o?1:o<n?-1:0})).push(a),(n=function(t,e){var o,n,r,i,s;for(i=1,s=0;s<u.maxIterations;)if((a=t.pop()).count()){if(o=(r=f(c,a))[0],n=r[1],!o)return void console.log("cbox1 not defined; shouldn't happen");if(t.push(o),n&&(t.push(n),i++),e<=i)return;if(s++>u.maxIterations)return void console.log("infinite loop; perhaps too few pixels")}else t.push(a),s++})(r,this.fractByPopulations*e),i=new PriorityQueue(function(t,e){var o,n;return o=t.count()*t.volume(),(n=e.count()*e.volume())<o?1:o<n?-1:0});r.size();)i.push(r.pop());for(n(i,e-i.size()),o=new s;i.size();)o.push(i.pop());return o},b}.call(this),function(){window.ColorExtract=function(){function m(){}return m.getColorMap=function(t,e,o,n,r,i){var s,a,c,u,l,h,f,g,p,d;for(null==i&&(i=8),c=t.getContext("2d").getImageData(e,o,n,r).data,u=[],h=f=o,p=o+r;f<p;h=f+=1)for(a=h*n*4,l=g=e,d=e+n;g<d;l=g+=1)s=a+4*l,u.push([c[s],c[s+1],c[s+2]]);return(new MMCQ).quantize(u,i)},m.colorDist=function(t,e){var o;return(o=function(t){return t*t})(t[0]-e[0])+o(t[1]-e[1])+o(t[2]-e[2])},m.extract=function(t,e,o){var n,r,i,s,a,c,u,l,h,f,g,p,d;for(e.width=25,e.height=25,e.getContext("2d").drawImage(t,0,0,e.width,e.height),(r=m.getColorMap(e,0,0,e.width,e.height,4).cboxes.map(function(t){return{count:t.cbox.count(),rgb:t.color}})).sort(function(t,e){return e.count-t.count}),n=r[0].rgb,(u=m.getColorMap(e,0,0,t.width,t.height,10).cboxes.map(function(t){return{count:t.cbox.count(),rgb:t.color}})).sort(function(t,e){return e.count-t.count}),f=l=0,p=u.length;f<p;f++)i=u[f],l<(s=m.colorDist(n,i.rgb))&&(l=s,a=i.rgb);for(g=l=0,d=u.length;g<d;g++)i=u[g],l<(s=m.colorDist(n,i.rgb))&&i.rgb!==a&&(l=s,c=i.rgb);return o({bgColor:(h=function(t){return"rgb("+t[0]+", "+t[1]+", "+t[2]+")"})(n),fgColor:h(a),fgColor2:h(c)})},m}()}.call(this),function(l){l(function(){var t=function(n,r,i){var s;return function(){var t=this,e=arguments,o=i&&!s;clearTimeout(s),s=setTimeout(function(){s=null,i||n.apply(t,e)},r),o&&n.apply(t,e)}};l(".js-popup-menu").jsPopupMenu(),l("html").hasClass("no-placeholder")&&l('input[type="text"],textarea').each(function(){l(this).attr("placeholder")&&!l(this).val()&&l(this).val(l(this).attr("placeholder")),l(this).focus(function(){l(this).val()==l(this).attr("placeholder")&&l(this).val("")}).blur(function(){!l(this).val()&&l(this).attr("placeholder")&&l(this).val(l(this).attr("placeholder"))})}),l(".form_fields:not(.edy-fe-fields) select, .custom-select").jqSelect(),l("body:not(.editmode) table").each(function(){l(this).wrap('<div class="table-holder" />')}),l(".mobile-menu-toggler").click(function(t){t.preventDefault(),l("body").toggleClass("mobilemenu-open"),l("body").removeClass("mobilesearch-open")}),l(".mobile-menu-close").on("click",function(t){t.preventDefault(),l("body").hasClass("language-menu-open")?l("body").removeClass("language-menu-open"):l("body").removeClass("mobilemenu-open")}),l(".language-menu-btn").on("click",function(t){t.preventDefault(),l("body").addClass("language-menu-open")}),l(".comment-form-focus-input").focus(function(){l(this).hide();l(this).closest(".comment-form").find(".form_area").show().find("textarea").focus()}),l("body").hasClass("editmode")&&(o(),l(window).resize(t(o,100))),l("body").hasClass("front-page")&&(e(),l(".tbl").css("visibility","visible"),l(window).resize(t(e,100))),l(".comment-form").hasClass("form_with_errors")?l("html, body").scrollTop(l(".comment-form").offset().top):0<l("form").find(".form_error, .form_notice").length&&l("html, body").scrollTop(l(".form_error, .form_notice").closest("form").offset().top)});var e=function(){var t=l(window).height();l(".tbl").css("height","auto").height(t-140)},o=function(){var t=l(".site-title:visible");t.is(":empty")&&l(".site-title-editable").appendTo(t)},h=function(){.68<=frontPageContentCoverCombinedLightness?l(".js-background-type").addClass("light-background").removeClass("dark-background"):l(".js-background-type").addClass("dark-background").removeClass("light-background")},n=function(t,e){return function(o,n){if(o&&n){"string"==typeof o&&(o=o.replace(/rgba?\(/,"").replace(/\)/,"").split(","),l.each(o,function(t,e){o[t]=+e})),"string"==typeof n&&(n=n.replace(/rgba?\(/,"").replace(/\)/,"").split(","),l.each(n,function(t,e){n[t]=+e})),"object"==typeof o&&o.hasOwnProperty("length")&&3==o.length&&o.push(1),"object"==typeof n&&n.hasOwnProperty("length")&&3==n.length&&n.push(1);var t=[0,0,0,0];return t[3]=1-(1-n[3])*(1-o[3]),0===t[3]&&(t[3]=1e-6),t[0]=Math.min(n[0]*n[3]/t[3]+o[0]*o[3]*(1-n[3])/t[3],255),t[1]=Math.min(n[1]*n[3]/t[3]+o[1]*o[3]*(1-n[3])/t[3],255),t[2]=Math.min(n[2]*n[3]/t[3]+o[2]*o[3]*(1-n[3])/t[3],255),l.map(t,function(t){return Math.floor(t)})}}(t||[255,255,255,1],e||[255,255,255,1])},f=function(t,e){var o=n(t,e);return Math.round((.2126*+o[0]+.7152*+o[1]+.0722*+o[2])/2.55)/100};window.site=l.extend(window.site||{},{toggleFlags:function(){l(".js-option-toggle-flags").on("click",function(t){if(t.stopPropagation(),l(this).hasClass("js-flag-disable-btn"))var e=!1;else e=!0;siteData.set("flags_state",e),l(this).toggleClass("js-flag-disable-btn"),l(".js-menu-lang-wrap").toggleClass("flags-enabled flags-disabled")})},frontPageContentCoverBgPreview:function(t,e){var o=l(".js-bgpicker-cover-image").css("background-image"),n=t.imageSizes?function(t,e){for(var o,n=0,r=t.length;n<r;n++){if(t[n].width<e)return o||t[n];o=t[n]}return t[t.length-1]}(t.imageSizes,l(window).width()):null,r=t.image&&""!==t.image?"url("+n.url+")":"none",i=t.imageSizes&&""!==t.imageSizes?t.imageSizes:null,s=t.color&&""!==t.color?t.color:"rgba(0,0,0,0)",a=(t.colorData&&""!==t.colorData&&t.colorData.lightness,l("<img>")),c=l("<canvas>"),u=t.image&&""!==t.image?t.image:null;u?function(t,e){for(var o=t.length;o--;)if(-1<e.indexOf(t[o].url.trim()))return!0;return!1}(i,o)?(frontPageContentBg.frontPageContentBgImageColor=frontPageContentBg.frontPageContentBgImageColor?frontPageContentBg.frontPageContentBgImageColor:"rgba(224,210,207,1)",frontPageContentCoverCombinedLightness=f(frontPageContentBg.frontPageContentBgImageColor,s),h()):(a.attr("src",u.replace(/.*\/(photos|voogstock)/g,"/photos")),a.on("load",function(){ColorExtract.extract(a[0],c[0],function(t){frontPageContentBg.frontPageContentBgImageColor=t.bgColor?t.bgColor:"rgba(255,255,255,1)",frontPageContentCoverCombinedLightness=f(frontPageContentBg.frontPageContentBgImageColor,s),h()})})):(frontPageContentBg.frontPageContentBgImageColor="rgba(255,255,255,1)",frontPageContentCoverCombinedLightness=f(frontPageContentBg.frontPageContentBgImageColor,s),h()),l(e).find(".js-bgpicker-cover-image").css({"background-image":r}),l(e).find(".js-bgpicker-cover-color").css({"background-color":s})},frontPageContentCoverBgCommit:function(t,e){var o,n=l.extend(!0,{},t);n.image=t.image||"",n.imageSizes=null==(o=t.imageSizes)||"string"==typeof o&&o.match(/^[\\'"]+$/)?"":o,n.color=t.color||"rgba(255,255,255,0)",n.combinedLightness=frontPageContentCoverCombinedLightness,pageData.set(e,n)},handleFrontPageContentCoverColorScheme:function(t){void 0!==t&&(.6<t?l(".header-wrapper").addClass("light").removeClass("dark"):l(".header-wrapper").addClass("dark").removeClass("light"))}});window.template=l.extend(window.template||{},{bindCustomTexteditorStyles:function(t){window.edy=window.edy||[],edy.push(["texteditorStyles",{name:t,tagname:"a",attribute:{href:"#"},classname:"custom-btn",toggle:!0}])}})}(jQuery),function(n){n.fn.extend({jsPopupMenu:function(t){return this.each(function(){var t=n(this),e=t.find(".js-popup-menu-btn"),o=t.find(".js-popup-menu-popover");o.hide(),e.on("click",function(t){t.preventDefault(),o.is(":hidden")&&(o.show(),e.addClass("open"),setTimeout(function(){n(document).on("click.js-popup-menu-click",function(){o.hide(),e.removeClass("open"),n(this).off(".js-popup-menu-click")})},0))})}),this}})}(jQuery),function(s){s.jquerySelect={init:function(t,e){t.wrap('<div class="jq-select" />');var o=t.parent(),n=s('<div class="jq-select-arrow"></div>'),r=s('<div class="jq-select-content" />'),i=s('<div class="jq-select-inner" />').text(t.children(":selected").text());r.append(i),o.append(r),o.append(n),t.hasClass("form_field_size_large")?(t.removeClass("form_field_size_large"),o.addClass("form_field_size_large")):t.hasClass("form_field_size_medium")?(t.removeClass("form_field_size_medium"),o.addClass("form_field_size_medium")):(t.hasClass("form_field_size_small")&&t.removeClass("form_field_size_small"),o.addClass("form_field_size_small")),t.change(s.proxy(function(){i.text(t.children(":selected").text())},this)),t.keyup(s.proxy(function(){i.text(t.children(":selected").text())},this)),t.bind("update",s.proxy(function(){i.text(t.children(":selected").text())},this))}},s.fn.extend({jqSelect:function(e){return this.each(function(){var t=s.extend({},e);s.jquerySelect.init(s(this),t)}),this}})}(jQuery);